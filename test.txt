it('ValidateFormData: should set errors when Paid-Thru date is earlier than prevpdthru', () => {
  // Arrange
  component.account = {
    formulacd: 1,
    datepdthru: '2025-01-01',  // earlier
    prevpdthru: '2025-02-01'   // later
  } as any;

  const earlyDate = new Date(2025, 0, 1); // Jan 1, 2025
  const laterDate = new Date(2025, 1, 1); // Feb 1, 2025

  // ✅ Make sure isStringValid returns true so we don’t skip into "missing date"
  spyOn(component.utils, 'isStringValid').and.callFake((val: any) => !!val);

  // ✅ Ensure ToDate returns the correct mapping for each field
  spyOn(component.utils, 'ToDate').and.callFake((val: any) => {
    if (val === '2025-01-01') return earlyDate;
    if (val === '2025-02-01') return laterDate;
    return new Date();
  });

  // ✅ Fake formatted date for error message
  spyOn(component.utils, 'getDisplayCurrentDate').and.returnValue('02/01/2025');

  // Act
  component.ValidateFormData();

  // Assert
  expect(component.firstValidationErrorMessage)
    .toBe('The date entered is earlier than the previous Paid-thru date of 02/01/2025');
  expect(component.thirdValidationErrorMessage)
    .toBe('Press Close to re-enter.');
});