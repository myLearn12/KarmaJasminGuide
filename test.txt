it('GenerateTableRows(): error branch -> calls displayServiceErrors, sets loading false and dispatches LOADINGACTION(false)', fakeAsync(() => {
  // arrange - make feeApiservice.getRequest return an error observable
  (component as any).feeApiservice = {
    getRequest: jasmine.createSpy('getRequest')
      .and.returnValue(throwError({ error: { statusMessage: 'server failed' } }))
  } as any;

  // spies
  const displaySpy = spyOn(component as any, 'displayServiceErrors');
  const dispatchSpy = spyOn(component['store'], 'dispatch');

  // act
  component.GenerateTableRows();
  // throwError emits synchronously on subscribe, but flushMicrotasks/tick to be safe
  flushMicrotasks();

  // assert
  expect((component as any).feeApiservice.getRequest).toHaveBeenCalled();
  expect(displaySpy).toHaveBeenCalledWith('server failed');
  expect(component.loading).toBeFalse();
  expect(dispatchSpy).toHaveBeenCalledWith(jasmine.any(Object)); // LOADINGACTION(false)
}));