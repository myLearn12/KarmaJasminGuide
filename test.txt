it('OnDivisionChange: when mapping exists and region differs â†’ sets newRegion fields and shows action modal', fakeAsync(() => {
  // Arrange
  // user selects division 30 that maps to regionId 2 (different from account.regionId '1')
  (component as any).cbDivision = { value: '30' };

  component.account = { divisionId: 10, regionId: '1' } as any;

  component.divisions = [
    { divisionId: 10, divisionDesc: 'Div A' },
    { divisionId: 30, divisionDesc: 'Div C' },
  ] as any[];

  component.regionDivisions = [
    { divisionId: 30, regionId: 2, regionDesc: 'South' },
  ] as any[];

  spyOn(component as any, 'revShareDivMappingMessage');
  (component as any).actionModal = { show: jasmine.createSpy('show') };

  // Act
  (component as any).OnDivisionChange();
  tick();

  // Assert
  expect((component as any).revShareDivMappingMessage).toHaveBeenCalled();

  // newRegion resolved from mapping
  expect(component.newRegionId).toBe(2);
  expect(component.newRegionDesc).toBe('South');

  // modal content & visibility
  expect(component.actionModelTitle).toContain('Region Modified');
  expect(component.actionModelMessage).toContain('belongs to South Region');
  expect((component as any).actionModal.show).toHaveBeenCalled();
}));
