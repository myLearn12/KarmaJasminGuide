it('onSearchButtonClick(): with valid dates sets loading flags, dispatches LOADINGACTION(true) and calls GenerateTableRows()', () => {
  // form validation returns false so execution continues
  spyOn(component, 'ValidateFormControls').and.returnValue(false);

  // make ToDate return a real Date so the date-comparison path is exercised
  spyOn(component['utils'], 'ToDate').and.callFake((d: any) => new Date(d));

  // spy the store.dispatch so we can assert it was called
  spyOn(component['store'], 'dispatch').and.stub();

  // spy GenerateTableRows to confirm it was invoked
  spyOn(component, 'GenerateTableRows').and.stub();

  // arrange valid from/to values (strings are fine since ToDate is faked)
  component.selectedFromDate = '2020-01-01';
  component.selectedToDate = '2020-01-02';

  // act
  component.onSearchButtonClick();

  // assertions: error block cleared, loading flag set, dispatch called and GenerateTableRows invoked
  expect(component.errorBlockMessage).toBeNull();
  expect(component.loading).toBeTrue();
  expect(component.GenerateTableRows).toHaveBeenCalled();
  expect(component['utils'].ToDate).toHaveBeenCalledWith(component.selectedFromDate);
  expect(component['utils'].ToDate).toHaveBeenCalledWith(component.selectedToDate);
  expect(component['store'].dispatch).toHaveBeenCalled();
});