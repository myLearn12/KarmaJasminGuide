it('processRecord(): error branch dispatches LOADINGACTION(false) as last dispatch and calls displayServiceErrors', fakeAsync(() => {
  component.sheetName = 'sheet1';
  component.accoutColumnHeader = 'acct';
  component.worksheet = { sheet1: [{ acct: 'A1' }] } as any;
  component.region = { regionId: 1 } as any;
  component.processTypeId = 10;
  component._actionModal = { show: jasmine.createSpy('show') } as any;
  component.appConfigService = { accrualUpdateUrl: 'URL/' } as any;

  spyOn(component.utils, 'ToEstDate').and.returnValue('DATE');
  spyOn(component.utils, 'getCurrentUser').and.returnValue('USER');
  const dispatchSpy = spyOn(component.store, 'dispatch');
  const displaySpy = spyOn(component, 'displayServiceErrors');
  spyOn(feeApiService, 'postRequest').and.returnValue(throwError(() => ({ error: { statusMessage: 'ERR' } })));

  component.processRecord();
  tick();

  // last call to dispatch should be LOADINGACTION(false)
  const lastArg = dispatchSpy.calls.mostRecent().args[0];
  expect(lastArg.payload).toBeFalse();

  expect(displaySpy).toHaveBeenCalledWith('ERR');
}));