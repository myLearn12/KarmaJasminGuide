// error branch
it('LoadDefaultComboBox(): error -> calls displayServiceErrors and dispatches LOADINGACTION(false)', fakeAsync(() => {
  // arrange
  const errorResp = { error: { statusMessage: 'server failed', statusCode: '500' } };
  spyOn((component as any).feeApiservice, 'getRequest').and.returnValue(throwError(() => errorResp));
  spyOn(component, 'displayServiceErrors');

  // make regionComboBox present so code can set options later
  (component as any).regionComboBox = { options: null };
  (component as any).loading = true;

  const storeSpy = spyOn((component as any).store, 'dispatch').and.callThrough();

  // act
  (component as any).LoadDefaultComboBox();
  tick();

  // assert
  expect(component.displayServiceErrors).toHaveBeenCalledWith('server failed');
  expect(storeSpy).toHaveBeenCalledWith(jasmine.any(Object)); // LOADINGACTION(false)
  expect((component as any).loading).toBeFalse();
}));

// complete branch
it('LoadDefaultComboBox(): complete -> sets regionComboBox.options and regionComboBoxData and dispatches LOADINGACTION(false)', fakeAsync(() => {
  // arrange
  const regions = [{ regionId: 1, regionDescription: 'R1' }, { regionId: 2, regionDescription: 'R2' }];
  spyOn((component as any).feeApiservice, 'getRequest').and.returnValue(of(regions));

  // create a minimal spy object for utils so TypeScript won't complain
  (component as any).utils = jasmine.createSpyObj('CommonFunctionsService', ['LoadComboBoxData']);
  ((component as any).utils.LoadComboBoxData as jasmine.Spy).and.returnValue([{ value: 1, label: 'R1' }]);

  (component as any).regionComboBox = { options: null };
  const storeSpy = spyOn((component as any).store, 'dispatch').and.callThrough();

  // act
  (component as any).LoadDefaultComboBox();
  tick();

  // assert
  expect((component as any).regions).toEqual(regions);
  expect((component as any).regionComboBoxData).toEqual([{ options: [{ value: 1, label: 'R1' }] }]);
  expect((component as any).regionComboBox.options).toEqual(JSON.parse(JSON.stringify(regions)));
  expect(storeSpy).toHaveBeenCalledWith(jasmine.any(Object)); // LOADINGACTION(false)
  expect((component as any).loading).toBeFalse();
}));