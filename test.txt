it('LoadRegion(): should load region data, stop loading and dispatch LOADINGACTION(false) on success', () => {
  // Arrange
  component.regionid = 'R001';

  // Ensure the component's appConfigService has the exact property the component uses.
  // If your component uses getRegionByIdUrl use that; if it uses getRegionByIdurl use that.
  (component as any).appConfigService = {
    getRegionByIdUrl: '/api/region/',   // <-- preferred / common spelling
    getRegionByIdurl: '/api/region/'    // <-- alternate spelling (safe to set both)
  };

  const mockRegionData = { name: 'West Region' };

  // Spy getRequest and return an observable-like object
  const getRequestSpy = jasmine.createSpy('getRequest').and.callFake((url: string) => {
    // Assert called URL is concatenation of configured URL + regionId
    expect(url).toBe('/api/region/R001');
    return { subscribe: (o: any) => o.next(mockRegionData) } as any;
  });
  (component as any).feeApiservice = { getRequest: getRequestSpy };

  const loadRegionDataSpy = spyOn(component as any, 'LoadRegionData');
  const dispatchSpy = spyOn((component as any).store, 'dispatch');

  // Act
  component.LoadRegion();

  // Assert
  expect(loadRegionDataSpy).toHaveBeenCalledWith(mockRegionData);
  expect(component.loading).toBeFalse();
  expect(dispatchSpy).toHaveBeenCalledWith(jasmine.any(LOADINGACTION));
  expect(getRequestSpy).toHaveBeenCalled(); // url assertion already checked above
});

it('LoadRegion(): should display error, stop loading and dispatch LOADINGACTION(false) on failure', () => {
  // Arrange
  component.regionid = 'R002';
  (component as any).appConfigService = {
    getRegionByIdUrl: '/api/region/',
    getRegionByIdurl: '/api/region/'
  };

  const getRequestSpy = jasmine.createSpy('getRequest').and.callFake((url: string) => {
    expect(url).toBe('/api/region/R002');
    return { subscribe: (o: any) => o.error({ error: { statusMessage: 'Region not found' } }) } as any;
  });
  (component as any).feeApiservice = { getRequest: getRequestSpy };

  const displayErrorSpy = spyOn(component as any, 'displayServiceErrors');
  const dispatchSpy = spyOn((component as any).store, 'dispatch');

  // Act
  component.LoadRegion();

  // Assert
  expect(displayErrorSpy).toHaveBeenCalledWith('Region not found');
  expect(component.loading).toBeFalse();
  expect(dispatchSpy).toHaveBeenCalledWith(jasmine.any(LOADINGACTION));
  expect(getRequestSpy).toHaveBeenCalled();
});