it('processData: should show action modal when formula matches and values changed but paidThru same', () => {
  // Arrange
  component.account = {
    formulacd: 1,
    cashfee: 200,
    cashpp: 300,
    datepdthru: '2025-09-01'
  } as any;

  component.oldCashFeeValue = 100;  // different
  component.oldPrepaidValue = 200;  // different
  component.oldPaidThruDate = '2025-09-01'; // same as account

  (component as any)._actionModal = { show: jasmine.createSpy('show') };
  spyOn(component, 'processRecord');

  // Act
  component.processData();

  // Assert
  expect((component as any)._actionModal.show).toHaveBeenCalled();
  expect(component.processRecord).not.toHaveBeenCalled();
});

it('processData: should call processRecord when condition not met', () => {
  // Arrange
  component.account = {
    formulacd: 2,  // not 1/4/6
    cashfee: 200,
    cashpp: 300,
    datepdthru: '2025-09-01'
  } as any;

  component.oldCashFeeValue = 200;
  component.oldPrepaidValue = 300;
  component.oldPaidThruDate = '2025-09-01';

  (component as any)._actionModal = { show: jasmine.createSpy('show') };
  spyOn(component, 'processRecord');

  // Act
  component.processData();

  // Assert
  expect(component.processRecord).toHaveBeenCalled();
  expect((component as any)._actionModal.show).not.toHaveBeenCalled();
});
