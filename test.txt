it('LoadRegion(): success -> calls LoadRegionData, clears loading and dispatches LOADINGACTION(false)', fakeAsync(() => {
  // arrange
  (component as any).regionid = 'R001';
  (component as any).appConfigService = { getRegionByIdUrl: '/api/region/' } as any;

  const regionObj = { regionId: 'R001', regionName: 'Region A' };
  spyOn(component.feeApiservice, 'getRequest').and.returnValue(of(regionObj));
  const loadRegionDataSpy = spyOn(component as any, 'LoadRegionData').and.callFake(() => {});
  const dispatchSpy = spyOn(component['store'], 'dispatch').and.callFake(() => {});

  // make loading true initially so we can assert it gets cleared
  (component as any).loading = true;

  // act
  (component as any).LoadRegion();
  tick();

  // assert
  expect(component.feeApiservice.getRequest).toHaveBeenCalledWith('/api/region/' + 'R001');
  expect(loadRegionDataSpy).toHaveBeenCalledWith(regionObj);
  expect((component as any).loading).toBeFalse();
  expect(dispatchSpy).toHaveBeenCalledWith(jasmine.any(Object)); // LOADINGACTION(false)
}));

it('LoadRegion(): error -> calls displayServiceErrors, clears loading and dispatches LOADINGACTION(false)', fakeAsync(() => {
  // arrange
  (component as any).regionid = 'R002';
  (component as any).appConfigService = { getRegionByIdUrl: '/api/region/' } as any;

  const err = { error: { statusMessage: 'server failure' } };
  spyOn(component.feeApiservice, 'getRequest').and.returnValue(throwError(() => err));
  const displaySpy = spyOn(component as any, 'displayServiceErrors').and.callThrough();
  const dispatchSpy = spyOn(component['store'], 'dispatch').and.callFake(() => {});

  (component as any).loading = true;

  // act
  (component as any).LoadRegion();
  tick();

  // assert
  expect(component.feeApiservice.getRequest).toHaveBeenCalledWith('/api/region/' + 'R002');
  expect(displaySpy).toHaveBeenCalledWith('server failure');
  expect((component as any).loading).toBeFalse();
  expect(dispatchSpy).toHaveBeenCalledWith(jasmine.any(Object)); // LOADINGACTION(false)
}));